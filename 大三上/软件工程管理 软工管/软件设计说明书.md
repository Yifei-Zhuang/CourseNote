## 1 引言

### 1.1 编写目的

​	该软件概要设计说明书以软件需求规格说明书和系统设计与实现计划为基础，说明系统的总体架构，各个功能的实现方式及数据库设计，明确各个模块的外部接口、内部接口和用户接口，为软件系统的开发提供指导，为软件系统的维护提供参照。

​	预期读者:

 - 项目经理
 - 系统分析人员
 - 系统设计人员
 - 系统开发人员
 - 系统测试人员
 - 系统质量分析员 - 系统维护人员。

### 1.2 背景

​	自疫情爆发以来，中医药在控制疫情方面发挥了不可替代的作用。作为中国流传了数千年的文化传承，中医药常识早已渗透进我们生活中的方方面面，它们或以传统，常识等知识经验口口相传，或以药方，药材等满含厚重气息的可见物的形式流传。但在长期的传承中，总会有一些知识文化被遗忘，被误传，网络环境错综复杂，很多时候一条信息真假难辨，这位中医药的知识传播带来了莫大的困难。

​	在这一背景之下，一个严谨，广泛，可靠的中医药百科网站亟待出现。一方面，借助百科的形式，网站可以将中医药相关的信息进行归纳整理，更有助于相关知识的学习保存与查询；另一方面，网站可以将错误的观念与信息整理出来进行辟谣解释，让群众对于中医知识有正确的理解。特别是在疫情期间，各类基于中医药的"偏方"与谣言可以更加快速的得以纠正，更有助于国家对于疫情的防控。

​	总而言之，中医药信息百科平台的推出对于中医药的传播发展普及推广，中医观念深入人心，普及正确的中药知识，协助防疫防控等方面均具有重要意义。

​	项目系统名称：中医药百科平台

​	项目提出方：软件工程管理课程老师邵建

​	项目开发者：课程第15小组

​	系统用户：广大网友

### 1.3 定义

​	Mysql:一个小型关系型数据库管理系统。

​	Nginx: Nginx 是一款负载均衡服务器软件，它可以运行在几乎所有广泛使用的计算机平台上，由于其跨平台和安全性被广泛使用，是最流行的 Web 服务器端软件之一。

​	SMTP 服务器: SMTP(Simple Mail Transfer Protocol)即简单邮件传输协议，它是一组用于由源地址到目的地址传送邮件的规划，由它来控制信件的中转方式。SMTP 服务器是遵循 SMTP 协议的发送邮件服务器，用来发送或中转发送邮件。

​	Vue:Vue 主要用于构建前端 UI。

​	md5:MD5 即 Message-Digest-Algorithm5(信息摘要算法 5)，为计算机安全领域广泛使用的一种散列函数，用以提供消息的完整性保护，是一种不可逆加密算法。

​	sha1:sha1 即 Secure Hash Algorithm(安全哈希算法)，主要适用于数字签名标准(Digital Signature Standard DSS)里面定义的数字签名算法(Digital Signature Algorithm DSA)，是一种不可逆加密算法。

​	nodejs: Node.js 采用 Google开发的 V8执行代码，使用事件驱动、非阻塞和异步输入输出模型等技术来提高性能，可优化应用程序的传输量和规模。这些技术通常用于资料密集的即时应用程序。

​	Elastic Search:一个高扩展、开源的全文检索和分析引擎。

### 1.4 定义

1. 认证: 防范信息的损坏和泄露。

2. 权限: 指用户职能的范围，即各种用户所登录界面、所接触数据、所进行操作等的范围。

3. 用例: 用户场景通常称为用例，它提供了系统将如何被使用的描述。

4. IPO 图: 是输入/处理/输出图的简称，描述输入数据、对数据的处理和输出数据之间的关系。

5. 数据流图: 是 SA 方法中用于表示系统逻辑模型的一种工具，它以图形的方式描述数据在系

   统中流动和处理的过程，它是一种功能模型。

6. 数据流图: 是 SA 方法中用于表示系统逻辑模型的一种工具，它以图形的方式描述数据在系

   统中流动和处理的过程，它是一种功能模型。

7. CRC 卡: CRC 模型实际上是表示类的标准索引卡片的集合。这些卡片被分为三部分，顶部写

   类名，下面左侧部分列出类的职责，右侧部分列出类的协作关系。

8. 数据词典:是对所有与系统相关的数据元素的一个有组织的列表、以及精确严格的定义，使得

   用户和系统分析员对于输入、输出、存储成分和中间计算有共同的理解。

9. 系统集成: 将不同的系统，根据应用需要，有机地组合成一个一体化的、功能更加强大的新型

   系统的过程和方法。

### 1.5 参考文献

​	[1]《软件工程——实践者的研究方法》，Roger S.Pressman，机械工业出版社

​	[2]《软件需求(第三版)》，Karl Wiegers，Joy Beatty，清华大学出版社

​	[3]《软件工程开发国家标准》

​	[4] 《G15-软件需求规格说明书》

​	[5] 《G15-项目计划》

​	[6] 《G15-项目章程》

## 2 总体设计

### 2.1 用户需求规定

##### 普通网友需求

1. 注册账户
2. 登录账户
3. 修改账户信息
4. 申请转为专家账户
5. 查看词条
6. 查看浏览历史
7. 点赞词条
8. 收藏词条
9. 查看自己的收藏词条
10. 评论词条
11. 对评论进行评论
12. 搜索词条

##### 专家网友需求

1. 提交词条修改申请

##### 管理员需求

 1. 增加词条
 1. 删除词条
 1. 编辑词条
 1. 审核用户提权申请
 1. 审核专家修改申请

##### 用户类及其特征：

| 用户类   | 描述                                                         |
| -------- | ------------------------------------------------------------ |
| 普通用户 | 可以注册和登录账户、修改账户信息，可以在个人信息界面申请提权为专家用户，可以在搜索栏中输入要搜索的词条关键词进行模糊或者精确搜索，点击对应的词条卡片查看词条详细信息，可以对词条进行点赞和收藏，可以查看自己的浏览历史，收藏列表，可以对词条进行评论，也可以对评论进行评论 |
| 专家用户 | 除了普通用户所能够使用的所有功能（除了注册）之外，还能够在词条界面点击修改申请按钮，填写修改原因和修改方式（类似 git log -p），之后可以提交申请，可以查看自己的申请状态（pending，refused，acceptd） |
| 管理员   | 可以管理所有的词条，添加或删除词条，编辑词条，可以审核用户转为专家用户的申请，可以审核专家用户提交的词条修改申请 |

### 2.2 其他需求规定 

##### 性能需求

​	服务器性能要求能满足网友日常的访问需求，保持并发承受能力，在界面简洁美观的基础上，使网络延时短

##### 输入输出需求

​	客户端通过网页形式向用户展现一个简洁友好的操作界面，用户可以点击超链接跳转界面，点击按钮提交表单。

​	服务器后台处理数据后显示在网页界面上。 

##### 数据管理需求

安全:
	数据库对参与数据库操作的数据都会预处理后再加入查询语句，避免通过网页 SQL 注入的方式获取数据库信息或破坏数据库。数据库中密码通过不可逆加密加密存储，限制过短的密码，减低密泄露的风险。

性能:

​	对于需要频繁访问数据库的操作，需要建立持久的数据库连接。

​	一般操作，为减轻数据库负荷，在操作完成后断开连接。

##### 故障处理需求

1.软件开发团队提供系统维护支持，有完备的内部文档和外部文档。 

2.系统报错信息可读性高。

### 2.3 运行环境

​	本网站主要服务于众多用户，需要保证至少 300 名用户同时取得服务的需求，包括数据存储能力和网络吞吐能力，保证账户一定的安全性。

​		软件运行环境

| 项目             | 名称                | 版本                    |
| ---------------- | ------------------- | ----------------------- |
| 操作系统         | Linux               | kernel 6.0 Ubuntu发行版 |
| 网站服务器       | Nginx               | 1.15.8                  |
| 数据库服务器     | Linux socket        |                         |
| 数据库服务器类型 | Mysql Elasticsearch | 8.0                     |
| 浏览器           | Chrome              |                         |

​	硬件运行环境

| 项目                                                         | 名称                                               |
| ------------------------------------------------------------ | -------------------------------------------------- |
| 操作系统                                                     | CPU:CORE i5 及以上、硬盘:500G 及以上内存:2G 及以上 |
| 应用服务器<br />数据库服务器<br />邮件服务器<br />文件服务器 | 内存:512M 及以上<br />硬盘:50G 及以上              |
| 通讯设备                                                     | 网线:具有良好的数据传输能力                        |

### 2.4 基本设计概念和处理流程

##### 服务器

​	以 Apache2 为服务器，nodejs 语言编写后端代码，数据库采用 Mysql ，搜索引擎使用 Elasticsearch。当用户注册以及登录系统之后，执行搜索操作时浏览器接收用户的请求，并传送到服务器，执行 相应的程序，通过搜索引擎 ES 查询相关内容，并且从数据库接口函数向数据库发送 SQL 查询语句，数 据库接收 SQL 查询语句后执行，返回查询结果，处理查询结果后返回给前端，并显示在网站页面上。用户执行收藏、点赞、申请提权等其他操作的时候，请求由浏览器处理之后发送给服务器，服务器socket监听到请求之后执行对应的controller程序，将执行结果返回给前端并进行渲染。

##### 客户端

浏览器采用常用的 IE, Chrome, FireFox 等。客户端在不频繁的操作页面时完成操作后断开与数据库的连接以减轻服务器负荷;在操作频繁时保持连接以增加访问􏰀度。

客户端动态页面:嵌入 Vue，动态网页以数据库技术为基础，能降低网站维护的工作量。

Vue:页面的各种文本框与按键操作能够完成，同时能实现无刷新页面的一些动画效果，包括下拉菜单等

![1](../../../../../Downloads/1.png)





### 2.5 结构

##### 用户需求分析图

![2.5](../../../../../Downloads/2.5.jpg)

##### 系统模块架构图

![架构图](../../../../../Downloads/架构图.jpg)

##### 系统模块设计

![模块设计](../../../../../Downloads/模块设计.png)

##### 数据上下文

![上下文](../../../../../Downloads/上下文.png)

##### 总体E-R图

![ER](../../../../../Downloads/ER.jpg)

##### 关键IPO图

![login](../../../../../Downloads/login.png)

![register](../../../../../Downloads/register.png)

![edit](../../../../../Downloads/edit.png)

![see](../../../../../Downloads/see.png)

![search](../../../../../Downloads/like.png)

![history](../../../../../Downloads/apply2.png)

![list](../../../../../Downloads/mem.png)

![edt2](../../../../../Downloads/edt2.png)

![delete](../../../../../Downloads/delete.png)

![new](../../../../../Downloads/new.png)

## 6 系统出错设计

### 6.1 出错信息

| 输出信息形式                  | 含义                                                         | 处理方法                     |
| ----------------------------- | ------------------------------------------------------------ | ---------------------------- |
| 数据库连接失败                | 由于并发操作的用户数量很大，导致 ES 访问读写率降低;或者 ES 的节点配置不对，导致 ES 连接失败 | 修改ES节点配置               |
| 磁盘损坏                      | 由于物理因素等，导致数据库中的数据丢失                       | 定期对数据库中的数据进行备份 |
| 数据库读取乱码或汉字输出为'?' | 客户端页面，数据库，数据库读取过程编码不一致                 | 统一各处的编码方式           |
| 网络连接失败                  | 网络波动造成请求处理失败                                     | 重连网络，重新请求           |



### 6.2 补救措施 

##### 系统备份

定期备份系统数据，当系统数据因不可抗拒力丢失时，可以启用备份数据。

##### 分布式部署

将系统部署到不同计算机上，减小硬件损坏造成的数据丢失的影响。

## 7 系统维护设计

### 7.1 概述

1. 连接数据库时，需要在创建数据库连接，销毁数据库连接时使用 try catch 语句捕获异常，对不同的错误信息尽量区分输出。

2. 管理员有权对整个网站的状况进行控以防系统出现不可预计的错误防止系统显示不合法信息。
3. 系统维护人员每次维护后需要留下完备可读的系统维护日志便于管理员和其他维护人员查看。

### 7.2 检测点设计

##### 注册、登录功能

1. 进入欢迎页
2. 点击注册
3. 输入账户信息，点击注册
4. 使用注册账户登录

##### 词条相关功能

1. 登录账户
2. 搜索栏输入关键词，点击搜索
3. 点击查看详情按钮，查看详情
4. 点赞，收藏词条
5. 评论词条，对评论进行评论
6. 查看收藏列表和浏览历史

##### 申请提权功能

1. 登录账户，进入申请界面
2. 输入申请信息，点击申请
3. 查看个人申请状态

##### 修改词条功能

1. 登录专家账户
2. 填写修改理由和方式，点击提交
3. 查看申请列表

##### 管理员功能

1. 登录管理员账户
2. 输入新词条信息，点击添加
3. 删除词条、编辑词条
4. 审核申请

### 7.3 系统维护设计

##### 硬件资源维护:

定期清理服务器硬盘垃圾，可根据网站实际需求选择升级服务器性能; 

##### 数据库维护:

定期备份数据库文件; 

##### 系统功能升级:

根据用户实际访问平台的需求，对于系统功能进行合理的更新;
